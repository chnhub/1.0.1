<!DOCTYPE html>
<html>

<head>
	<title>Bootstrap 实例</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link href="js/bootstrap-editable.css" rel="stylesheet"> -->
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"> -->

	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
	<link href="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.css" rel="stylesheet">
	<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/> -->
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
	<link href="https://cdn.jsdelivr.net/gh/Talv/x-editable@develop/dist/bootstrap4-editable/css/bootstrap-editable.css" rel="stylesheet">


	<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script> -->
	<!-- <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">   -->
	<script src="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.js"></script>
	<script src="https://unpkg.com/bootstrap-table@1.18.1/dist/locale/bootstrap-table-zh-CN.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script> -->
	<script src="https://cdn.jsdelivr.net/gh/Talv/x-editable@develop/dist/bootstrap4-editable/js/bootstrap-editable.min.js"></script>
	<script src="https://unpkg.com/bootstrap-table@1.18.1/dist/extensions/editable/bootstrap-table-editable.min.js"></script>



</head>

<body>

	<div class="container-fluid" style="  position: fixed; height: 100%; overflow: auto;">
		<h2>Flex</h2>
		<p>使用 d-flex 类创建一个弹性盒子容器，并设置三个弹性子元素：</p>
		<div class="d-flex flex-row justify-content-center bg-secondary" style="height: 100%;">
			<div class="col-sm-2 p-5 bg-info ">Flex item 1
				<br/><br/>
				<div>
					<ul class="nav nav-pills flex-column">
						<li class="nav-item">
							<a class="nav-link active" href="">设置1</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="">设置2</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="">设置3</a>
						</li>
						<li class="nav-item">
							<a class="nav-link disabled" href="">禁用</a>
						</li>
					</ul>
				</div>
			</div>
			<!-- <div class="col-sm-7 p-1 bg-white"></div> -->
			<div class="col-sm-7 bg-white">
				<div class="container-fluid">

					<h4>事件管理</h4>
					<!-- <p><strong>注意:</strong> 使用 <strong>data-parent</strong>
						属性来确保所有的折叠元素在指定的父元素下，这样就能实现在一个折叠选项显示时其他选项就隐藏。</p> -->
					<p></p>
					<div id="accordion">
						<div class="card">
							<div class="card-header">
								<a class="card-link" data-toggle="collapse" href="#collapseOne">
									选项一
								</a>
							</div>
							<div id="collapseOne" class="collapse show" data-parent="#accordion">
								<div class="card-body">
									#1 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！
								</div>
							</div>
						</div>
						<div class="card">
							<div class="card-header">
								<a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
									选项二
								</a>
							</div>
							<div id="collapseTwo" class="collapse" data-parent="#accordion">
								<div class="card-body">
									#2 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！
								</div>
							</div>
						</div>
						<div class="card">
							<div class="card-header">
								<a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
									选项三
								</a>
							</div>
							<div id="collapseThree" class="collapse" data-parent="#accordion">
								<div class="card-body">
									#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-sm-3 p-3 bg-primary">Flex item 3</div>
		</div>
	</div>

	<script>

		var collapse_json = { data: [{ "id": "1", "name": "生成学员信息" }, { "id": "2", "name": "生成教练信息" }] };
		$('#accordion').on('show.bs.collapse', this, function (e) {
			// do something…

		});
		// $(".card>div>a").click(this,function(e){
		// 	alert(this.innerText);
		// });
		//设置editable 弹出模式
		//$.fn.editable.defaults.mode = 'inline';
		initCollapse("#accordion", collapse_json.data);
		function initCollapse(selector, params) {
			for (var i = 0; i < params.length; i++) {

				var obj = new Object();
				obj.selector = selector;
				obj.id = params[i].id
				obj.name = params[i].name
				obj.data = getTable(obj);

				var str = getCollapse(obj);
				$(selector).append(str);
				initTable(obj);
			}

		}
		/**
		 * 
		 * @param {"初始化collapse的参数对象"} obj selector:collapse的选择器，id:collapse的id，name:collapse的name，
		 */
		function getCollapse(obj) {
			if (!obj) return null;
			obj.selector;
			obj.id;
			obj.name;
			obj.data;
			var strCollapse = `
						<div class="card">
							<div class="card-header">
								<a class="card-link" data-toggle="collapse" href="#collapse_${obj.id}">
									${obj.name}
								</a>
							</div>
							<div id="collapse_${obj.id}" class="collapse" data-parent=${obj.selector}>
								<div class="card-body">
									${obj.data}
								</div>
							</div>
						</div>`;
			return strCollapse;
		}
		function getTable(obj) {
			var table = `<div class="table-responsive">
			<table id = "table_${obj.id}" class="table table-hover>
				<thead class="thead-light">
				</thead>
			</table>
			</div>`;
			return table;
		}
		function initTable(obj){
			var data = [{"code":"1001","id":"event_1", "selector":"#button", "event":"1", "params":"", "order":"test"},{"code":"1002","id":"event_2", "selector":"#btn2", "event":"2", }];
			$(`#table_${obj.id}`).bootstrapTable({
				//dataField: "data", // 接收数据json的默认键
				data: data,
				//pagination: false,
				//editable: true,
				clickToSelect: true,
				columns: [{
					width: 10,
					field:"index",
					title:"#",
					align:"center",
					formatter: function(value, row, index){
						return index;
					}
				},{
					width: 100,
					field:"id",
					title:"ID",
					align:"center",
					editable: {
						type: 'text',
						title: '年龄',
						validate: function (v) {
							if (!v) return '不能为空';
                    }
                }
				},{
					width: 200,
					field:"selectormode",
					title:"SelectorMode",
					align:"center",
					
				},{
					width: 400,
					field:"selector",
					title:"Selector",
					align:"center",
					
				},{
					width: 100,
					field:"event",
					title:"Event",
					align:"center",
			        //编辑框的模式：支持popup和inline两种模式，默认是popup
					editable: { 
						emptytext: "不能为空",
						//mode: "inline",
						// placement: 'top',
						type: 'select',
						title: '部门',
						id:"event",
						defaultValue: "test",
						pk: 1, 
						source:[{text: "group1", children: [{value: 1, text: "click", order:"1"}, {value: 2, text: "text2"}]},{text: "group2", children: [{value: 4, text: "click"}, {value: 5, text: "text2"}]}],
						//success: function(response, newValue) {  return true;}
					}

				},{
					field:"params",
					title:"Params",
					align:"center",

				},{
					field:"order",
					title:"Order",
					align:"center",

				},{
					field:"order",
					title:"Order",
					align:"center",
					editable: {
						type: 'text',
						title: '年龄',
					},
				}],
				onEditableSave: function (field, row, oldValue, $el, a, b) {
					alert(row.code);

				},
			});

		}
		
	</script>

<style>
	html {
		font-size: 0.9rem; /*页面全局字体*/
	}
	.collapse{
		/* font-size: 12px; */
	}
</style>
</body>

</html>